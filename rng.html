<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geschiedenis rng</title>
<style>
body {
    font-family: Verdana, sans-serif;
    background-color: #f4f4f4;
    color: #333;
    padding: 20px;
    max-width: 800px;
    margin: auto;
}
button {
    background-color: #007BFF;
    border: none;
    color: white;
    padding: 10px 15px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}
button:hover {
    background-color: #0056b3;
}
pre {
    background-color: #eaeaea;
    padding: 10px;
    border-radius: 5px;
    font-size: 16px;
}
div {
    margin: 10px 0;
    font-size: 18px;
}
#feedback {
    font-weight: bold;
    color: green;
}
</style>
</head>
<body>

<h1>üè∫ Geschiedenis Units</h1>

<div id="geldLabel"></div>
<div id="turnLabel"></div>
<div id="inkomenLabel"></div>
<div id="timerLabel"></div>
<pre id="inventarisDiv"></pre>
<div id="feedback"></div>
<div id="buttons"></div>

<script>
// ================== DATA ==================
const unitsList = [
    ["Romeinse Soldaat", 60, 1],
    ["Franse Soldaat", 20, 2],
    ["Middeleeuwse Ridder", 10, 5],
    ["Viking", 5, 10],
    ["Napoleon Bonaparte", 2, 50],
    ["Julius Caesar", 1, 100],
    ["Alexander de Grote", 0.5, 250],
    ["Cleopatra", 0.3, 500],
    ["Sun Tzu", 0.1, 1000],
    ["Leonardo da Vinci", 0.05, 2000],
    ["Christoffel Columbus", 0.02, 5000],
    ["Willem de Veroveraar", 0.01, 10000]
];

let inventory = JSON.parse(localStorage.getItem("inventory")) || {};
let money = parseInt(localStorage.getItem("geld")) || 100;
let turn = parseInt(localStorage.getItem("turn")) || 1;
const rollCost = 25;

// payout systeem
const PAYOUT_INTERVAL = 10; // seconden
let timeLeft = PAYOUT_INTERVAL;

// ================== ELEMENTEN ==================
const moneyLabel = document.getElementById("geldLabel");
const turnLabel = document.getElementById("turnLabel");
const incomeLabel = document.getElementById("inkomenLabel");
const timerLabel = document.getElementById("timerLabel");
const inventarisDiv = document.getElementById("inventarisDiv");
const feedback = document.getElementById("feedback");
const buttonsDiv = document.getElementById("buttons");

// ================== FUNCTIES ==================
const updateUI = () => {
    moneyLabel.textContent = `üí∞ Geld: ${money}`;
    turnLabel.textContent = `üìÜ Beurt: ${turn}`;
    incomeLabel.textContent = `üí∞ Inkomen per payout: ${calculateIncome()}`;
    timerLabel.textContent = `‚è≥ Volgende payout over: ${timeLeft}s`;
    inventarisDiv.textContent = showInventory();
};

const getUnitIncome = (name) => {
    for (let [unitName, , income] of unitsList) {
        if (unitName === name) return income;
    }
    return 0;
};

const getUnitChance = (name) => {
    for (let [unitName, chance] of unitsList) {
        if (unitName === name) return chance;
    }
    return "?";
};

const calculateIncome = () => {
    let total = 0;
    for (let unit in inventory) {
        total += getUnitIncome(unit) * inventory[unit];
    }
    return total;
};

const showInventory = () => {
    let result = "";
    for (let name in inventory) {
        result += `- ${name} x${inventory[name]} (üí∞ ${getUnitIncome(name)} per payout, üé≤ ${getUnitChance(name)}%)\n`;
    }
    return result || "Je hebt nog geen units!";
};

const rollUnit = () => {
    const roll = Math.random() * 100;
    let total = 0;
    for (let [name, chance] of unitsList) {
        total += chance;
        if (roll <= total) return name;
    }
    return unitsList[0][0];
};

const rollAction = (rolls = 1) => {
    const totalCost = rollCost * rolls;
    if (money < totalCost) {
        feedback.textContent = `üö´ Niet genoeg geld! (${totalCost} nodig)`;
        return;
    }

    money -= totalCost;

    for (let i = 0; i < rolls; i++) {
        const unit = rollUnit();
        const isNew = !inventory[unit];
        if (isNew) money += 2;
        inventory[unit] = (inventory[unit] || 0) + 1;
    }

    localStorage.setItem("inventory", JSON.stringify(inventory));
    localStorage.setItem("geld", money);

    feedback.textContent = `üéâ Je hebt ${rolls} unit(s) gerold!`;
    updateUI();
};

// ================== AUTOMATISCHE PAYOUT ==================
setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
        const earned = calculateIncome();
        money += earned;
        turn++;

        if (turn % 100 === 0) money += 10;

        localStorage.setItem("geld", money);
        localStorage.setItem("turn", turn);

        feedback.textContent = `üí∏ Payout ontvangen: +${earned}`;
        timeLeft = PAYOUT_INTERVAL;
    }
    updateUI();
}, 1000);

// ================== BUTTONS ==================
const createButton = (label, callback) => {
    const btn = document.createElement("button");
    btn.textContent = label;
    btn.onclick = callback;
    buttonsDiv.appendChild(btn);
};

createButton("üé≤ Roll x1", () => rollAction(1));
createButton("üé≤ Roll x10", () => rollAction(10));
createButton("üé≤ Roll x100", () => rollAction(100));
createButton("üé≤ Roll x1000", () => rollAction(1000));
createButton("‚¨Ö Terug naar Games", () => {
    window.location.href = "games.html";
});

updateUI();
</script>
</body>
</html>
