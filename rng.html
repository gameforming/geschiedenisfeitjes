<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>GES RNG</title>
<style>
body {
    font-family: Verdana, sans-serif;
    background: #f4f4f4;
    padding: 20px;
    max-width: 800px;
    margin: auto;
    text-align: center;
}
button {
    padding: 10px 15px;
    margin: 5px;
    font-size: 16px;
    cursor: pointer;
}
pre {
    background: #eee;
    padding: 10px;
    text-align: left;
}
#feedback { font-weight: bold; margin-top: 10px; }
</style>
</head>
<body>

<h1>ðŸŽ² GES RNG</h1>

<div id="moneyLabel"></div>
<div id="collectionLabel"></div>
<div id="timerLabel"></div>
<pre id="inventory"></pre>
<div id="feedback"></div>

<div id="buttons"></div>

<a href="collection.html">âž¡ Collection</a>

<script>
// ================== DATA ==================
const unitsList = [
    ["Romeinse Soldaat", 60, 1],
    ["Franse Soldaat", 20, 2],
    ["Middeleeuwse Ridder", 10, 5],
    ["Viking", 5, 10],
    ["Napoleon Bonaparte", 2, 50],
    ["Julius Caesar", 1, 100],
    ["Alexander de Grote", 0.5, 250],
    ["Cleopatra", 0.3, 500],
    ["Sun Tzu", 0.1, 1000],
    ["Leonardo da Vinci", 0.05, 2000],
    ["Christoffel Columbus", 0.02, 5000],
    ["Willem de Veroveraar", 0.01, 10000]
];

// ================== STATE ==================
let inventory = JSON.parse(localStorage.getItem("rngInventory")) || {};
let gameMoney = parseInt(localStorage.getItem("gameMoney")) || 100;
let collectionGulden = parseInt(localStorage.getItem("collectionGulden")) || 0;

const rollCost = 25;
const PAYOUT_INTERVAL = 10;
let timeLeft = PAYOUT_INTERVAL;

// ================== UI ==================
const moneyLabel = document.getElementById("moneyLabel");
const collectionLabel = document.getElementById("collectionLabel");
const timerLabel = document.getElementById("timerLabel");
const inventoryDiv = document.getElementById("inventory");
const feedback = document.getElementById("feedback");
const buttonsDiv = document.getElementById("buttons");

function updateUI() {
    moneyLabel.innerText = "ðŸ’° Game Money: " + gameMoney;
    collectionLabel.innerText = "ðŸª™ Collection Gulden: " + collectionGulden;
    timerLabel.innerText = "â³ Volgende payout over: " + timeLeft + "s";

    inventoryDiv.innerText =
        Object.keys(inventory).length
        ? Object.entries(inventory).map(u => `- ${u[0]} x${u[1]} (ðŸ’° ${getIncome(u[0])})`).join("\n")
        : "Nog geen units";
}

// ================== FUNCTIES ==================
function getIncome(name) {
    for (let [unitName, , income] of unitsList) {
        if (unitName === name) return income;
    }
    return 0;
}

function rollUnit() {
    const roll = Math.random() * 100;
    let total = 0;
    for (let [name, chance] of unitsList) {
        total += chance;
        if (roll <= total) return name;
    }
    return unitsList[0][0];
}

function roll(times) {
    const totalCost = rollCost * times;
    if (gameMoney < totalCost) {
        feedback.innerText = `âŒ Niet genoeg game money! (${totalCost} nodig)`;
        return;
    }

    gameMoney -= totalCost;

    for (let i = 0; i < times; i++) {
        const unit = rollUnit();
        const isNew = !inventory[unit];
        if (isNew) collectionGulden += 2; // Beloning voor Collection
        inventory[unit] = (inventory[unit] || 0) + 1;
    }

    feedback.innerText = `ðŸŽ‰ Je hebt ${times} unit(s) gerold!`;
    save();
    updateUI();
}

function payout() {
    let earned = 0;
    for (let unit in inventory) earned += getIncome(unit) * inventory[unit];
    gameMoney += earned;
    feedback.innerText = `ðŸ’¸ Je kreeg ${earned} game money als payout!`;
    save();
}

// ================== SAVE ==================
function save() {
    localStorage.setItem("rngInventory", JSON.stringify(inventory));
    localStorage.setItem("gameMoney", gameMoney);
    localStorage.setItem("collectionGulden", collectionGulden);
}

// ================== TIMER ==================
setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
        payout();
        timeLeft = PAYOUT_INTERVAL;
    }
    updateUI();
}, 1000);

// ================== KNOPPEN ==================
function createButton(label, times) {
    const btn = document.createElement("button");
    btn.innerText = label;
    btn.onclick = () => roll(times);
    buttonsDiv.appendChild(btn);
}

createButton("ðŸŽ² Roll x1", 1);
createButton("ðŸŽ² Roll x10", 10);
createButton("ðŸŽ² Roll x100", 100);
createButton("ðŸŽ² Roll x1000", 1000);

updateUI();
</script>
</body>
</html>
