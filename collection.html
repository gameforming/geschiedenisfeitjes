<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Mijn Verzameling - geschiedenis feitjes</title>

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: white;
  text-align: center;
}

h1 { margin-top: 30px; }

button {
  padding: 14px 26px;
  font-size: 16px;
  border-radius: 14px;
  border: none;
  background: goud;
  cursor: pointer;
  margin: 12px;
}

.unit {
  background: rgba(255,255,255,0.12);
  padding: 14px;
  margin: 12px auto;
  border-radius: 16px;
  max-width: 460px;
}

.gewoon { border-left: 6px solid #bdc3c7; }
.zeldzaam { border-left: 6px solid #3498db; }
.legendary { border-left: 6px solid #ff9f1a; }
.mythic { border-left: 6px solid #ffdd00; }

a {
  kleur: #ffeb3b;
  display: block;
  margin: 30px;
}
</style>
</head>

<body>

<h1>ðŸ“œ Historische Verzameling</h1>
<h2>ðŸ’° Gulden: <span id="guldenDisplay">0</span></h2>

<button onclick="openCrate()">ðŸ“¦ Open Historische Kist (20 gulden)</button>

<div id="collection"></div>

<a href="index.html">â¬… Terug naar menu</a>

<script>
/* =====================
   BASIS OPSLAG
===================== */
let gulden = localStorage.getItem("gulden")
  ? parseInt(localStorage.getItem("gulden"))
  : 0;

let units = JSON.parse(localStorage.getItem("units")) || {};

/* =====================
   ZELDZAAMHEID VOLGORDE
===================== */
const zeldzaamheidVolgorde = {
  gewoon: 1,
  zeldzaam: 2,
  legendary: 3,
  mythic: 4
};

/* =====================
   INHOUD VAN DE KIST
   REGEL:
   - GENERIEK â†’ gewoon / zeldzaam
   - NAMEN â†’ legendary / mythic
===================== */
const crateUnits = [

  /* GENERIEKE FIGUREN */
  { naam: "Holbewoner", zeldzaamheid: "gewoon", kans: 16 },
  { naam: "Romeinse Soldaat", zeldzaamheid: "gewoon", kans: 14 },
  { naam: "Middeleeuwse Ridder", zeldzaamheid: "zeldzaam", kans: 12 },
  { naam: "Vikingkrijger", zeldzaamheid: "zeldzaam", kans: 10 },
  { naam: "Franse Soldaat", zeldzaamheid: "zeldzaam", kans: 8 },

  /* LEGENDARY PERSONEN */
  { naam: "Julius Caesar", zeldzaamheid: "legendary", kans: 6 },
  { naam: "Napoleon Bonaparte", zeldzaamheid: "legendary", kans: 5 },
  { naam: "Leonardo da Vinci", zeldzaamheid: "legendary", kans: 5 },
  { naam: "Christoffel Columbus", zeldzaamheid: "legendary", kans: 4 },
  { naam: "Jeanne d'Arc", zeldzaamheid: "legendary", kans: 4 },
  { naam: "Willem de Veroveraar", zeldzaamheid: "legendary", kans: 3 },

  /* MYTHIC PERSONEN */
  { naam: "Alexander de Grote", zeldzaamheid: "mythic", kans: 2 },
  { naam: "Cleopatra", zeldzaamheid: "mythic", kans: 1.8 },
  { naam: "Dzjengis Khan", zeldzaamheid: "mythic", kans: 1.5 },
  { naam: "Karel de Grote", zeldzaamheid: "mythic", kans: 1.2 },
  { naam: "Sun Tzu", zeldzaamheid: "mythic", kans: 1 }
];

/* =====================
   KIST OPENEN
===================== */
function openCrate() {
  if (gulden < 20) {
    alert("âŒ Niet genoeg gulden!");
    return;
  }

  gulden -= 20;
  localStorage.setItem("gulden", gulden);

  const worp = Math.random() * 100;
  let totaal = 0;

  for (let unit of crateUnits) {
    totaal += unit.kans;
    if (worp <= totaal) {
      voegUnitToe(unit);
      break;
    }
  }

  updateUI();
}

/* =====================
   UNIT TOEVOEGEN
===================== */
function voegUnitToe(unit) {
  if (!units[unit.naam]) {
    units[unit.naam] = {
      aantal: 0,
      zeldzaamheid: unit.zeldzaamheid,
      kans: unit.kans
    };
  }
  units[unit.naam].aantal++;
  localStorage.setItem("units", JSON.stringify(units));
}

/* =====================
   INTERFACE BIJWERKEN
===================== */
function updateUI() {
  document.getElementById("guldenDisplay").innerText = gulden;
  const container = document.getElementById("collection");
  container.innerHTML = "";

  Object.entries(units)
    .sort((a, b) =>
      zeldzaamheidVolgorde[b[1].zeldzaamheid] -
      zeldzaamheidVolgorde[a[1].zeldzaamheid]
    )
    .forEach(([naam, data]) => {
      container.innerHTML += `
        <div class="unit ${data.zeldzaamheid}">
          <b>${naam}</b><br>
          Zeldzaamheid: ${data.zeldzaamheid}<br>
          Dropkans: ${data.kans}%<br>
          Aantal: ${data.aantal}
        </div>
      `;
    });
}

updateUI();
</script>

</body>
</html>
