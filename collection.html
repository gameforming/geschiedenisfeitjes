<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Mijn Verzameling â€“ Geschiedenis Collectors</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #0f2027, #2c5364);
      color: white;
      display: flex;
      justify-content: center;
    }
    .container {
      margin-top: 40px;
      width: 90%;
      max-width: 720px;
      text-align: center;
    }
    h1 { font-size: 2.2em; margin-bottom: 10px; }
    .gulden { font-size: 1.2em; margin-bottom: 25px; }
    .crates { display: flex; gap: 12px; justify-content: space-between; margin-bottom: 30px; }
    .crate {
      flex: 1;
      background: rgba(255,255,255,0.15);
      padding: 16px;
      border-radius: 18px;
      cursor: pointer;
      transition: transform 0.15s;
    }
    .crate:hover { transform: translateY(-4px); }
    .units { display: flex; flex-direction: column; gap: 10px; }
    .unit {
      background: rgba(255,255,255,0.12);
      padding: 14px 16px;
      border-radius: 16px;
      display: flex;
      justify-content: space-between;
      font-weight: 500;
    }
    .back { display: block; margin: 35px 0; text-decoration: none; color: white; opacity: 0.9; }
  </style>
</head>
<body>

<div class="container">
  <h1>ðŸ“¦ Mijn Verzameling</h1>
  <div class="gulden">ðŸ’° Gulden: <span id="guldenDisplay">0</span></div>

  <div class="crates">
    <div class="crate" onclick="buyCrate('houten')">ðŸŸ¤ Houten crate<br>100 gulden</div>
    <div class="crate" onclick="buyCrate('zilveren')">ðŸŸ¦ Zilveren crate<br>300 gulden</div>
    <div class="crate" onclick="buyCrate('gouden')">ðŸŸ¨ Gouden crate<br>700 gulden</div>
    <div class="crate" onclick="buyCrate('mythic')">ðŸ”® Mythic crate<br>1500 gulden</div>
  </div>

  <div class="units" id="unitContainer"></div>
  <a class="back" href="index.html">â¬… Terug naar home</a>
</div>

<script>
// ================= BASIS =================
let gulden = localStorage.getItem('gulden') ? parseInt(localStorage.getItem('gulden')) : 0;
document.getElementById('guldenDisplay').innerText = gulden;

let units = JSON.parse(localStorage.getItem('units')) || {};

const rarityOrder = ['Mythic','Legendary','Epic','Rare','Common'];

// ================= UNITS DATABASE =================
// âž• Voeg hier ZO veel units toe als je wilt
const unitList = [
  // Common
  { name:'Holbewoner', rarity:'Common', chance:60 },
  { name:'Egyptische Arbeider', rarity:'Common', chance:55 },
  { name:'Romeinse Burger', rarity:'Common', chance:50 },
  { name:'Franse Soldaat', rarity:'Common', chance:45 },
  { name:'Middeleeuwse Boer', rarity:'Common', chance:45 },

  // Rare
  { name:'Romeinse Soldaat', rarity:'Rare', chance:35 },
  { name:'Viking Raider', rarity:'Rare', chance:30 },
  { name:'Griekse Hopliet', rarity:'Rare', chance:30 },
  { name:'Kruisridder', rarity:'Rare', chance:25 },
  { name:'Samurai', rarity:'Rare', chance:25 },

  // Epic
  { name:'Spartaanse Krijger', rarity:'Epic', chance:18 },
  { name:'Romeinse Centurion', rarity:'Epic', chance:16 },
  { name:'Napoleon Bonaparte', rarity:'Epic', chance:14 },
  { name:'Genghis Khan', rarity:'Epic', chance:12 },
  { name:'Joan of Arc', rarity:'Epic', chance:12 },

  // Legendary
  { name:'Julius Caesar', rarity:'Legendary', chance:8 },
  { name:'Alexander de Grote', rarity:'Legendary', chance:7 },
  { name:'Leonardo da Vinci', rarity:'Legendary', chance:7 },
  { name:'Christoffel Columbus', rarity:'Legendary', chance:6 },
  { name:'Cleopatra', rarity:'Legendary', chance:6 },

  // Mythic (EXTREEM ZELDZAAM)
  { name:'Albert Einstein', rarity:'Mythic', chance:3 },
  { name:'Isaac Newton', rarity:'Mythic', chance:3 },
  { name:'Jezus van Nazareth', rarity:'Mythic', chance:2 },
  { name:'Mohammed', rarity:'Mythic', chance:2 },
  { name:'Siddhartha Gautama', rarity:'Mythic', chance:2 }
];

// ================= CRATES =================
const crates = {
  houten: { price:100, pool:['Common','Common','Rare'] },
  zilveren: { price:300, pool:['Common','Rare','Rare','Epic'] },
  gouden: { price:700, pool:['Rare','Epic','Epic','Legendary'] },
  mythic: { price:1500, pool:['Epic','Legendary','Mythic'] }
};

// ================= LOGICA =================
function buyCrate(type){
  const crate = crates[type];
  if(gulden < crate.price){ alert('âŒ Niet genoeg gulden'); return; }

  gulden -= crate.price;
  localStorage.setItem('gulden', gulden);
  document.getElementById('guldenDisplay').innerText = gulden;

  const rarity = crate.pool[Math.floor(Math.random()*crate.pool.length)];
  const candidates = unitList.filter(u => u.rarity === rarity);

  const totalChance = candidates.reduce((s,u)=>s+u.chance,0);
  let roll = Math.random() * totalChance;
  let chosen = candidates[0];

  for(const u of candidates){
    roll -= u.chance;
    if(roll <= 0){ chosen = u; break; }
  }

  if(!units[chosen.name]){
    units[chosen.name] = { count:0, rarity:chosen.rarity, chance:chosen.chance };
  }
  units[chosen.name].count++;

  localStorage.setItem('units', JSON.stringify(units));
  renderUnits();

  alert(`ðŸŽ‰ Je kreeg: ${chosen.name} (${chosen.rarity})`);
}

function renderUnits(){
  const container = document.getElementById('unitContainer');
  container.innerHTML = '';

  const sorted = Object.entries(units).sort((a,b)=>
    rarityOrder.indexOf(a[1].rarity) - rarityOrder.indexOf(b[1].rarity)
  );

  for(const [name,data] of sorted){
    const div = document.createElement('div');
    div.className = 'unit';
    div.innerHTML = `<strong>${name}</strong> ${data.rarity} ${data.chance}% Ã—${data.count}`;
    container.appendChild(div);
  }
}

renderUnits();
</script>

</body>
</html>
